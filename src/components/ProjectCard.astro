---
interface Props { title: string; description: string; link?: string; image?: string }
const { title, description, link = '#', image } = Astro.props;
---
<article class="card">
  {image && <img src={image} alt={title} class="card__img" loading="lazy" /> }
  <h3 class="card__title">{title}</h3>
  <p class="card__desc">{description}</p>
  <a href={link} class="card__link">Ver más →</a>
</article>

<script type="module">
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  const el = document.currentScript.closest(".card");
  const run = () => {
    gsap.from(el, {
      opacity: 0, y: 40, duration: 0.7, ease: "power3.out",
      scrollTrigger: { trigger: el, start: "top 80%", toggleActions: "play none none reverse" },
    });
  };
  if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", run, { once: true });
  else run();
</script>

<style>
  .card { border: 1px solid rgba(0,0,0,.08); border-radius: 1rem; padding: 1rem; background: rgba(255,255,255,.7); backdrop-filter: blur(6px); }
  .card__img { display:block; width:100%; height:auto; border-radius:.75rem; margin-bottom:.75rem; }
  .card__title { font-size: 1.125rem; font-weight: 700; }
  .card__desc { margin-top:.5rem; opacity:.9; }
  .card__link { display:inline-block; margin-top:.5rem; color:#4f46e5; font-weight:700; text-decoration:none; }
</style>
